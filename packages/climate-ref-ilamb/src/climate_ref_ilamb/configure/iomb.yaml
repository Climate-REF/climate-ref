registry: iomb

thetao-WOA2023-surface:
  sources:
    # TODO: Update to use the obs4REF equiv
    thetao: ilamb/WOA/thetao_mon_WOA_A5B4_gn_200501-201412.nc
  variable_cmap: Reds
  transforms:
  - select_depth:
      value: 0
  alternate_vars:
  - tos
  test_cases:
    - name: default
      description: "Historical ocean temperature from ACCESS-ESM1-5"
      registry_requests:
        - slug: reference
          registry_name: obs4ref
          variable_id: thetao
          source_id: WOA2023
      cmip6_requests:
        - slug: thetao
          source_id: ACCESS-ESM1-5
          experiment_id: historical
          variable_id: thetao
          member_id: r1i1p1f1
          table_id: Omon
          time_span: ["2005-01", "2014-12"]
        - slug: supplementary
          source_id: ACCESS-ESM1-5
          experiment_id: historical
          variable_id: [volcello, sftof]
          member_id: r1i1p1f1
          table_id: Ofx

so-WOA2023-surface:
  sources:
    # TODO: Update to use the obs4REF equiv
    so: ilamb/WOA/so_mon_WOA_A5B4_gn_200501-201412.nc
  transforms:
  - select_depth:
      value: 0
  variable_cmap: YlGn
  alternate_vars:
  - sos
  test_cases:
    - name: default
      description: "Historical sea surface salinity from ACCESS-ESM1-5"
      # TODO: Obs4REF data required (no fetcher yet): ilamb/WOA/so_mon_WOA_A5B4_gn_200501-201412.nc
      cmip6_requests:
        - slug: sos
          source_id: ACCESS-ESM1-5
          experiment_id: historical
          variable_id: sos
          member_id: r1i1p1f1
          table_id: Omon
          time_span: ["2005-01", "2014-12"]
        - slug: supplementary
          source_id: ACCESS-ESM1-5
          experiment_id: historical
          variable_id: [volcello, sftof]
          member_id: r1i1p1f1
          table_id: Ofx

amoc-RAPID:
  analyses:
  - timeseries
  related_vars:
  - msftmz
  transforms:
  - msftmz_to_rapid
  sources:
    # TODO: Update to use the obs4REF equiv
    amoc: ilamb/RAPID/amoc_mon_RAPID_BE_NA_200404-202302.nc
  test_cases:
    - name: default
      description: "Historical AMOC from ACCESS-ESM1-5"
      registry_requests:
        - slug: reference
          registry_name: obs4ref
          variable_id: msftmz
          source_id: RAPID
      cmip6_requests:
        - slug: msftmz
          source_id: ACCESS-ESM1-5
          experiment_id: historical
          variable_id: msftmz
          member_id: r1i1p1f1
          table_id: Omon
          time_span: ["2005-01", "2014-12"]
        - slug: supplementary
          source_id: ACCESS-ESM1-5
          experiment_id: historical
          variable_id: volcello
          member_id: r1i1p1f1
          table_id: Ofx

ohc-NOAA:
  sources:
    ohc: ilamb/NOAA/ohc_yr_OHC_BE_gm_200506-202406.nc
  related_vars:
  - thetao
  - volcello
  transforms:
  - select_depth:
      vmin: 0
      vmax: 2000
  - ocean_heat_content:
      reference_year: 2005
  analyses:
  - accumulate
  test_cases:
    - name: default
      description: "Historical ocean heat content from ACCESS-ESM1-5"
      registry_requests:
        - slug: reference
          registry_name: obs4ref
          variable_id: ohc
          source_id: NOAA
      cmip6_requests:
        - slug: thetao
          source_id: ACCESS-ESM1-5
          experiment_id: historical
          variable_id: thetao
          member_id: r1i1p1f1
          table_id: Omon
          time_span: ["2005-01", "2014-12"]
        - slug: supplementary
          source_id: ACCESS-ESM1-5
          experiment_id: historical
          variable_id: volcello
          member_id: r1i1p1f1
          table_id: Ofx
